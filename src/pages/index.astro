---
import { slugify, dateFormat, formatContent } from '@/lib/utils'
import { CollectionEntry, getCollection } from 'astro:content';
import Layout from '@layouts/Layout.astro';
import Link from '@components/Link.astro';
import Card from '../components/Card.astro';

const posts = await getCollection("posts");
const formatedPosts: CollectionEntry<"posts">[] = formatContent(posts);
---

<Layout title="Home">
  <div class="text-center mt-20 mb-10 p-5 rounded-lg text-neutral-900 bg-neutral-300 dark:text-neutral-50 dark:bg-neutral-500 drop-shadow-xl">
    Welcome to my personal blog. Here I share all my knowledge of technology and Cyber Security.
  </div>
  { formatedPosts.map((post: any) => (
    <div class="flex items-center justify-between">
      <Link href={`/posts/${post.slug}`}>
        {post.data.title}
        {post.data.draft && (<span>+</span>)}
      </Link>
      <div class="hidden md:inline-flex gap-1">
        {dateFormat(post.data.date)}
      </div>
    </div>
  ))}
    <div class="flex justify-start py-5">
      <Link href="/posts">All posts &raquo;</Link>
    </div>
</Layout>

